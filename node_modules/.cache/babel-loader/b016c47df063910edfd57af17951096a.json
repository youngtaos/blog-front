{"ast":null,"code":"var tokenKey = '_authing_token';\nvar userKey = '_authing_user';\n\nvar AuthenticationTokenProvider = function () {\n  function AuthenticationTokenProvider(options) {\n    this.options = options; // 为了兼容服务端不支持 localStorage 的情况\n\n    this.token = null;\n    this.user = null;\n  }\n\n  AuthenticationTokenProvider.prototype.setToken = function (token) {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(tokenKey, token);\n    } else {\n      this.token = token;\n    }\n  };\n\n  AuthenticationTokenProvider.prototype.getToken = function () {\n    return typeof localStorage !== 'undefined' ? localStorage.getItem(tokenKey) || '' : this.token;\n  };\n\n  AuthenticationTokenProvider.prototype.getUser = function () {\n    return typeof localStorage !== 'undefined' ? localStorage.getItem(userKey) ? JSON.parse(localStorage.getItem(userKey)) : null : this.user;\n  };\n\n  AuthenticationTokenProvider.prototype.setUser = function (user) {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(userKey, JSON.stringify(user));\n      localStorage.setItem(tokenKey, user.token);\n    } else {\n      this.user = user;\n      this.token = user.token;\n    }\n  };\n\n  AuthenticationTokenProvider.prototype.clearUser = function () {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.removeItem(userKey);\n      localStorage.removeItem(tokenKey);\n    } else {\n      this.user = null;\n      this.token = null;\n    }\n  };\n\n  return AuthenticationTokenProvider;\n}();\n\nexport { AuthenticationTokenProvider };","map":{"version":3,"sources":["../../../../src/lib/authentication/AuthenticationTokenProvider.ts"],"names":[],"mappings":"AAGA,IAAM,QAAQ,GAAG,gBAAjB;AACA,IAAM,OAAO,GAAG,eAAhB;;AAEA,IAAA,2BAAA,GAAA,YAAA;AAME,WAAA,2BAAA,CAAY,OAAZ,EAAgD;AAC9C,SAAK,OAAL,GAAe,OAAf,CAD8C,CAG9C;;AACA,SAAK,KAAL,GAAa,IAAb;AACA,SAAK,IAAL,GAAY,IAAZ;AACD;;AAED,EAAA,2BAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,KAAT,EAAsB;AACpB,QAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;AACvC,MAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,KAA/B;AACD,KAFD,MAEO;AACL,WAAK,KAAL,GAAa,KAAb;AACD;AACF,GAND;;AAQA,EAAA,2BAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,WAAO,OAAO,YAAP,KAAwB,WAAxB,GACH,YAAY,CAAC,OAAb,CAAqB,QAArB,KAAkC,EAD/B,GAEH,KAAK,KAFT;AAGD,GAJD;;AAMA,EAAA,2BAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACE,WAAO,OAAO,YAAP,KAAwB,WAAxB,GACH,YAAY,CAAC,OAAb,CAAqB,OAArB,IACE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAX,CADF,GAEE,IAHC,GAIH,KAAK,IAJT;AAKD,GAND;;AAQA,EAAA,2BAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,IAAR,EAAkB;AAChB,QAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;AACvC,MAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAAI,CAAC,SAAL,CAAe,IAAf,CAA9B;AACA,MAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,IAAI,CAAC,KAApC;AACD,KAHD,MAGO;AACL,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,KAAL,GAAa,IAAI,CAAC,KAAlB;AACD;AACF,GARD;;AAUA,EAAA,2BAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;AACE,QAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;AACvC,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,YAAY,CAAC,UAAb,CAAwB,QAAxB;AACD,KAHD,MAGO;AACL,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,KAAL,GAAa,IAAb;AACD;AACF,GARD;;AASF,SAAA,2BAAA;AAAC,CAvDD,EAAA","sourceRoot":"","sourcesContent":["var tokenKey = '_authing_token';\nvar userKey = '_authing_user';\nvar AuthenticationTokenProvider = /** @class */ (function () {\n    function AuthenticationTokenProvider(options) {\n        this.options = options;\n        // 为了兼容服务端不支持 localStorage 的情况\n        this.token = null;\n        this.user = null;\n    }\n    AuthenticationTokenProvider.prototype.setToken = function (token) {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.setItem(tokenKey, token);\n        }\n        else {\n            this.token = token;\n        }\n    };\n    AuthenticationTokenProvider.prototype.getToken = function () {\n        return typeof localStorage !== 'undefined'\n            ? localStorage.getItem(tokenKey) || ''\n            : this.token;\n    };\n    AuthenticationTokenProvider.prototype.getUser = function () {\n        return typeof localStorage !== 'undefined'\n            ? localStorage.getItem(userKey)\n                ? JSON.parse(localStorage.getItem(userKey))\n                : null\n            : this.user;\n    };\n    AuthenticationTokenProvider.prototype.setUser = function (user) {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.setItem(userKey, JSON.stringify(user));\n            localStorage.setItem(tokenKey, user.token);\n        }\n        else {\n            this.user = user;\n            this.token = user.token;\n        }\n    };\n    AuthenticationTokenProvider.prototype.clearUser = function () {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.removeItem(userKey);\n            localStorage.removeItem(tokenKey);\n        }\n        else {\n            this.user = null;\n            this.token = null;\n        }\n    };\n    return AuthenticationTokenProvider;\n}());\nexport { AuthenticationTokenProvider };\n//# sourceMappingURL=AuthenticationTokenProvider.js.map"]},"metadata":{},"sourceType":"module"}