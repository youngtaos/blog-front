{"ast":null,"code":"import { original, produce } from 'immer';\nimport { parseJsonByString } from '../../../../../../../common/utils';\nimport { ITEM_LOCATION_CHANGE } from './constant';\nconst initialSchema = parseJsonByString(window.localStorage.schema, {\n  name: 'page',\n  attributes: {},\n  children: []\n});\nconst defaultState = {\n  schema: initialSchema\n};\n\nconst reducer = (state = defaultState, action) => produce(state, draft => {\n  switch (action.type) {\n    case ITEM_LOCATION_CHANGE:\n      console.log(action);\n      const copy = original(draft.schema.children);\n      console.log(copy); // draft.schema.children.splice(action.oldIndex, 1);\n      // const deleteItem = copy[action.oldIndex];\n      // draft.schema.children.splice(action.newIndex, 0, deleteItem);\n\n      break;\n\n    default:\n      break;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["D:/桌面/blog/src/admin/container/HomeManagement/component/AreaItem/Component/store/reducer.js"],"names":["original","produce","parseJsonByString","ITEM_LOCATION_CHANGE","initialSchema","window","localStorage","schema","name","attributes","children","defaultState","reducer","state","action","draft","type","console","log","copy"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,OAAnB,QAAkC,OAAlC;AACA,SAASC,iBAAT,QAAkC,mCAAlC;AACA,SAASC,oBAAT,QAAqC,YAArC;AAEA,MAAMC,aAAa,GAAGF,iBAAiB,CAACG,MAAM,CAACC,YAAP,CAAoBC,MAArB,EAA6B;AAChEC,EAAAA,IAAI,EAAE,MAD0D;AAEhEC,EAAAA,UAAU,EAAE,EAFoD;AAGhEC,EAAAA,QAAQ,EAAE;AAHsD,CAA7B,CAAvC;AAMA,MAAMC,YAAY,GAAG;AACjBJ,EAAAA,MAAM,EAAEH;AADS,CAArB;;AAIA,MAAMQ,OAAO,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkCb,OAAO,CAACY,KAAD,EAASE,KAAD,IAAW;AACxE,UAAQD,MAAM,CAACE,IAAf;AACI,SAAKb,oBAAL;AACIc,MAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ;AACA,YAAMK,IAAI,GAAGnB,QAAQ,CAACe,KAAK,CAACR,MAAN,CAAaG,QAAd,CAArB;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ,EAHJ,CAII;AACA;AACA;;AACA;;AACJ;AACI;AAVR;AAYH,CAbwD,CAAzD;;AAeA,eAAeP,OAAf","sourcesContent":["import { original, produce } from 'immer';\r\nimport { parseJsonByString } from '../../../../../../../common/utils';\r\nimport { ITEM_LOCATION_CHANGE } from './constant';\r\n\r\nconst initialSchema = parseJsonByString(window.localStorage.schema, {\r\n    name: 'page',\r\n    attributes: {},\r\n    children: []\r\n});\r\n\r\nconst defaultState = {\r\n    schema: initialSchema\r\n}\r\n\r\nconst reducer = (state = defaultState, action) => produce(state, (draft) => {\r\n    switch (action.type) {\r\n        case ITEM_LOCATION_CHANGE:\r\n            console.log(action);\r\n            const copy = original(draft.schema.children);\r\n            console.log(copy);\r\n            // draft.schema.children.splice(action.oldIndex, 1);\r\n            // const deleteItem = copy[action.oldIndex];\r\n            // draft.schema.children.splice(action.newIndex, 0, deleteItem);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\r\nexport default reducer;"]},"metadata":{},"sourceType":"module"}