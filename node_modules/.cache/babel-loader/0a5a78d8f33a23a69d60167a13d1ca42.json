{"ast":null,"code":"import { original, produce } from 'immer';\nimport { parseJsonByString } from '../../../../common/utils';\nimport { CHANGE_SCHEMA, ADD_PAGECHILDREN, CHANGE_PAGE_CHILD, DELETE_PAGE_CHILD, CHANGE_ITEMLOCATION } from './constant';\nconst initialSchema = parseJsonByString(window.localStorage.schema, {\n  name: 'page',\n  attributes: {\n    Myname: 'yts',\n    description: '123'\n  },\n  children: []\n});\nconst defaultState = {\n  schema: initialSchema\n};\n\nconst reducer = (state = defaultState, action) => produce(state, draft => {\n  switch (action.type) {\n    case CHANGE_SCHEMA:\n      draft.schema = action.value;\n      break;\n\n    case ADD_PAGECHILDREN:\n      draft.schema.children.push(action.value);\n      break;\n\n    case CHANGE_PAGE_CHILD:\n      draft.schema.children.splice(action.index, 1, action.value);\n      break;\n\n    case DELETE_PAGE_CHILD:\n      draft.schema.children.splice(action.index, 1);\n      break;\n\n    case CHANGE_ITEMLOCATION:\n      const copy = original(draft.schema.children);\n      draft.schema.children.splice(action.oldIndex, 1);\n      const deleteItem = copy[action.oldIndex];\n      draft.schema.children.splice(action.newIndex, 0, deleteItem);\n      break;\n\n    default:\n      break;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["D:/桌面/blog/src/admin/container/HomeManagement/store/reducer.js"],"names":["original","produce","parseJsonByString","CHANGE_SCHEMA","ADD_PAGECHILDREN","CHANGE_PAGE_CHILD","DELETE_PAGE_CHILD","CHANGE_ITEMLOCATION","initialSchema","window","localStorage","schema","name","attributes","Myname","description","children","defaultState","reducer","state","action","draft","type","value","push","splice","index","copy","oldIndex","deleteItem","newIndex"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,OAAnB,QAAkC,OAAlC;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,SAASC,aAAT,EAAwBC,gBAAxB,EAA0CC,iBAA1C,EAA6DC,iBAA7D,EAAgFC,mBAAhF,QAA2G,YAA3G;AAEA,MAAMC,aAAa,GAAGN,iBAAiB,CAACO,MAAM,CAACC,YAAP,CAAoBC,MAArB,EAA6B;AAChEC,EAAAA,IAAI,EAAE,MAD0D;AAEhEC,EAAAA,UAAU,EAAE;AACRC,IAAAA,MAAM,EAAE,KADA;AAERC,IAAAA,WAAW,EAAE;AAFL,GAFoD;AAMhEC,EAAAA,QAAQ,EAAE;AANsD,CAA7B,CAAvC;AASA,MAAMC,YAAY,GAAG;AACjBN,EAAAA,MAAM,EAAEH;AADS,CAArB;;AAIA,MAAMU,OAAO,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkCnB,OAAO,CAACkB,KAAD,EAASE,KAAD,IAAW;AACxE,UAAQD,MAAM,CAACE,IAAf;AACI,SAAKnB,aAAL;AACIkB,MAAAA,KAAK,CAACV,MAAN,GAAeS,MAAM,CAACG,KAAtB;AACA;;AACJ,SAAKnB,gBAAL;AACIiB,MAAAA,KAAK,CAACV,MAAN,CAAaK,QAAb,CAAsBQ,IAAtB,CAA2BJ,MAAM,CAACG,KAAlC;AACA;;AACJ,SAAKlB,iBAAL;AACIgB,MAAAA,KAAK,CAACV,MAAN,CAAaK,QAAb,CAAsBS,MAAtB,CAA6BL,MAAM,CAACM,KAApC,EAA2C,CAA3C,EAA8CN,MAAM,CAACG,KAArD;AACA;;AACJ,SAAKjB,iBAAL;AACIe,MAAAA,KAAK,CAACV,MAAN,CAAaK,QAAb,CAAsBS,MAAtB,CAA6BL,MAAM,CAACM,KAApC,EAA2C,CAA3C;AACA;;AACJ,SAAKnB,mBAAL;AACI,YAAMoB,IAAI,GAAG3B,QAAQ,CAACqB,KAAK,CAACV,MAAN,CAAaK,QAAd,CAArB;AACAK,MAAAA,KAAK,CAACV,MAAN,CAAaK,QAAb,CAAsBS,MAAtB,CAA6BL,MAAM,CAACQ,QAApC,EAA8C,CAA9C;AACA,YAAMC,UAAU,GAAGF,IAAI,CAACP,MAAM,CAACQ,QAAR,CAAvB;AACAP,MAAAA,KAAK,CAACV,MAAN,CAAaK,QAAb,CAAsBS,MAAtB,CAA6BL,MAAM,CAACU,QAApC,EAA8C,CAA9C,EAAiDD,UAAjD;AACA;;AACJ;AACI;AApBR;AAsBH,CAvBwD,CAAzD;;AAyBA,eAAeX,OAAf","sourcesContent":["import { original, produce } from 'immer';\r\nimport { parseJsonByString } from '../../../../common/utils';\r\nimport { CHANGE_SCHEMA, ADD_PAGECHILDREN, CHANGE_PAGE_CHILD, DELETE_PAGE_CHILD, CHANGE_ITEMLOCATION } from './constant';\r\n\r\nconst initialSchema = parseJsonByString(window.localStorage.schema, {\r\n    name: 'page',\r\n    attributes: {\r\n        Myname: 'yts',\r\n        description: '123'\r\n    },\r\n    children: []\r\n});\r\n\r\nconst defaultState = {\r\n    schema: initialSchema\r\n}\r\n\r\nconst reducer = (state = defaultState, action) => produce(state, (draft) => {\r\n    switch (action.type) {\r\n        case CHANGE_SCHEMA:\r\n            draft.schema = action.value;\r\n            break;\r\n        case ADD_PAGECHILDREN:\r\n            draft.schema.children.push(action.value);\r\n            break;\r\n        case CHANGE_PAGE_CHILD:\r\n            draft.schema.children.splice(action.index, 1, action.value);\r\n            break;\r\n        case DELETE_PAGE_CHILD:\r\n            draft.schema.children.splice(action.index, 1);\r\n            break;\r\n        case CHANGE_ITEMLOCATION:\r\n            const copy = original(draft.schema.children);\r\n            draft.schema.children.splice(action.oldIndex, 1);\r\n            const deleteItem = copy[action.oldIndex];\r\n            draft.schema.children.splice(action.newIndex, 0, deleteItem);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\r\nexport default reducer;"]},"metadata":{},"sourceType":"module"}