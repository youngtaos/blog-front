{"ast":null,"code":"import { original, produce } from 'immer';\nimport { CHANGE_SCHEMA, ADD_PAGECHILDREN, CHANGE_PAGE_CHILD, DELETE_PAGE_CHILD, CHANGE_ITEMLOCATION } from './constant';\nconst initialSchema = {\n  \"name\": \"page\",\n  \"attributes\": {},\n  \"children\": [{\n    \"name\": \"Banner\",\n    \"attributes\": {},\n    \"children\": []\n  }, {\n    \"name\": \"Article\",\n    \"attributes\": {},\n    \"children\": []\n  }, {\n    \"name\": \"Footer\",\n    \"attributes\": {},\n    \"children\": []\n  }]\n};\nconst defaultState = {\n  schema: initialSchema\n};\n\nconst reducer = (state = defaultState, action) => produce(state, draft => {\n  switch (action.type) {\n    case CHANGE_SCHEMA:\n      draft.schema = action.value;\n      break;\n\n    case ADD_PAGECHILDREN:\n      draft.schema.children.push(action.value);\n      break;\n\n    case CHANGE_PAGE_CHILD:\n      draft.schema.children.splice(action.index, 1, action.value);\n      break;\n\n    case DELETE_PAGE_CHILD:\n      draft.schema.children.splice(action.index, 1);\n      break;\n\n    case CHANGE_ITEMLOCATION:\n      const copy = original(draft.schema.children);\n      draft.schema.children.splice(action.oldIndex, 1);\n      const deleteItem = copy[action.oldIndex];\n      draft.schema.children.splice(action.newIndex, 0, deleteItem);\n      break;\n\n    default:\n      break;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["D:/桌面/最近项目/blog/src/admin/container/HomeManagement/store/reducer.js"],"names":["original","produce","CHANGE_SCHEMA","ADD_PAGECHILDREN","CHANGE_PAGE_CHILD","DELETE_PAGE_CHILD","CHANGE_ITEMLOCATION","initialSchema","defaultState","schema","reducer","state","action","draft","type","value","children","push","splice","index","copy","oldIndex","deleteItem","newIndex"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,OAAnB,QAAkC,OAAlC;AACA,SAASC,aAAT,EAAwBC,gBAAxB,EAA0CC,iBAA1C,EAA6DC,iBAA7D,EAAgFC,mBAAhF,QAA2G,YAA3G;AAEA,MAAMC,aAAa,GAAG;AAAE,UAAQ,MAAV;AAAkB,gBAAc,EAAhC;AAAoC,cAAY,CAAC;AAAE,YAAQ,QAAV;AAAoB,kBAAc,EAAlC;AAAsC,gBAAY;AAAlD,GAAD,EAAyD;AAAE,YAAQ,SAAV;AAAqB,kBAAc,EAAnC;AAAuC,gBAAY;AAAnD,GAAzD,EAAkH;AAAE,YAAQ,QAAV;AAAoB,kBAAc,EAAlC;AAAsC,gBAAY;AAAlD,GAAlH;AAAhD,CAAtB;AAGA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAEF;AADS,CAArB;;AAIA,MAAMG,OAAO,GAAG,CAACC,KAAK,GAAGH,YAAT,EAAuBI,MAAvB,KAAkCX,OAAO,CAACU,KAAD,EAASE,KAAD,IAAW;AACxE,UAAQD,MAAM,CAACE,IAAf;AACI,SAAKZ,aAAL;AACIW,MAAAA,KAAK,CAACJ,MAAN,GAAeG,MAAM,CAACG,KAAtB;AACA;;AACJ,SAAKZ,gBAAL;AACIU,MAAAA,KAAK,CAACJ,MAAN,CAAaO,QAAb,CAAsBC,IAAtB,CAA2BL,MAAM,CAACG,KAAlC;AACA;;AACJ,SAAKX,iBAAL;AACIS,MAAAA,KAAK,CAACJ,MAAN,CAAaO,QAAb,CAAsBE,MAAtB,CAA6BN,MAAM,CAACO,KAApC,EAA2C,CAA3C,EAA8CP,MAAM,CAACG,KAArD;AACA;;AACJ,SAAKV,iBAAL;AACIQ,MAAAA,KAAK,CAACJ,MAAN,CAAaO,QAAb,CAAsBE,MAAtB,CAA6BN,MAAM,CAACO,KAApC,EAA2C,CAA3C;AACA;;AACJ,SAAKb,mBAAL;AACI,YAAMc,IAAI,GAAGpB,QAAQ,CAACa,KAAK,CAACJ,MAAN,CAAaO,QAAd,CAArB;AACAH,MAAAA,KAAK,CAACJ,MAAN,CAAaO,QAAb,CAAsBE,MAAtB,CAA6BN,MAAM,CAACS,QAApC,EAA8C,CAA9C;AACA,YAAMC,UAAU,GAAGF,IAAI,CAACR,MAAM,CAACS,QAAR,CAAvB;AACAR,MAAAA,KAAK,CAACJ,MAAN,CAAaO,QAAb,CAAsBE,MAAtB,CAA6BN,MAAM,CAACW,QAApC,EAA8C,CAA9C,EAAiDD,UAAjD;AACA;;AACJ;AACI;AApBR;AAsBH,CAvBwD,CAAzD;;AAyBA,eAAeZ,OAAf","sourcesContent":["import { original, produce } from 'immer';\r\nimport { CHANGE_SCHEMA, ADD_PAGECHILDREN, CHANGE_PAGE_CHILD, DELETE_PAGE_CHILD, CHANGE_ITEMLOCATION } from './constant';\r\n\r\nconst initialSchema = { \"name\": \"page\", \"attributes\": {}, \"children\": [{ \"name\": \"Banner\", \"attributes\": {}, \"children\": [] }, { \"name\": \"Article\", \"attributes\": {}, \"children\": [] }, { \"name\": \"Footer\", \"attributes\": {}, \"children\": [] }] }\r\n    ;\r\n\r\nconst defaultState = {\r\n    schema: initialSchema\r\n}\r\n\r\nconst reducer = (state = defaultState, action) => produce(state, (draft) => {\r\n    switch (action.type) {\r\n        case CHANGE_SCHEMA:\r\n            draft.schema = action.value;\r\n            break;\r\n        case ADD_PAGECHILDREN:\r\n            draft.schema.children.push(action.value);\r\n            break;\r\n        case CHANGE_PAGE_CHILD:\r\n            draft.schema.children.splice(action.index, 1, action.value);\r\n            break;\r\n        case DELETE_PAGE_CHILD:\r\n            draft.schema.children.splice(action.index, 1);\r\n            break;\r\n        case CHANGE_ITEMLOCATION:\r\n            const copy = original(draft.schema.children);\r\n            draft.schema.children.splice(action.oldIndex, 1);\r\n            const deleteItem = copy[action.oldIndex];\r\n            draft.schema.children.splice(action.newIndex, 0, deleteItem);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\r\nexport default reducer;"]},"metadata":{},"sourceType":"module"}